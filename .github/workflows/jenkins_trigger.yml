name: UI Pre Deploy Status Check ðŸ¤–ðŸ‘½

on:
  push:
    branches:
      - "!master"
      - "**"
  pull_request:
    types: [opened, reopened]
    branches:
      - "master"
jobs:
  # This workflow contains a job called "Trigger Jenkins"
  status_check:
    name: Trigger Jenkins Job
    runs-on: ubuntu-latest
    steps:
      - name: Split version code
        uses: xom9ikk/split@v1
        id: split
        with:
          string: http://binarybug-jenkins.centralindia.cloudapp.azure.com:8080/job/piggy_ui_pre_deploy_check/45/
          separator: /
          limit: -1
      - name: print number
        run: |
          echo ${{ steps.split.outputs._5 }}
          echo ${{github.ref}}
      - name: relase
        uses: maxkomarychev/oction-create-release@v0.7.1
        id: my_step_id
        with:
          token: ${{secrets.GITHUB_TOKEN}}
          tag_name: v0.0.${{ steps.split.outputs._5 }}
          target_commitish: ${{github.ref}}
          #prerelease: true
          name: "Baseline"
          body: "This Release was created through github actions"
      # - name: Trigger jenkins job
      #   uses: joshlk/jenkins-githubaction@master
      #   id: jenkins
      #   with:
      #     url: "http://binarybug-jenkins.centralindia.cloudapp.azure.com:8080/"
      #     job_name: "piggy_ui_pre_deploy_check"
      #     username: "binarybug"
      #     timeout: "600"
      #     interval: "30"
      #     api_token: ${{ secrets.JENKINS_TOKEN }}
      #     parameters: '{"Branch_Name":"${{github.ref}}",
      #                   "MAJOR":"0",
      #                   "MINOR":"0"}'
      # - name: Get job url
      #   run: echo "Job url is ${{ steps.jenkins.outputs.build_url }}"
